<!DOCTYPE html>
<html>
  <head>
    <title>Prueba de mapa - Google Maps Api V3</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <!--link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet"-->
    <!--meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"-->
    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }

    </style>
    <script src="countrypoints_v3.js" type="text/javascript"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBeV0tz-7_t5lEo4W9vpv5pYUymtXv2Y5c&v=3.exp&sensor=false&libraries=visualization"></script>
    <script>
     //Colores mapa
     //http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html
      var styles = [
      {
        "featureType": "water",
        "elementType": "geometry.fill",
        "stylers": [
          { "visibility": "on" },
          { "color": "#000045" },
          { "lightness": 53 },
          { "gamma": 0.46 },
          { "saturation": -65 }
        ]
      },{
        "featureType": "landscape",
        "stylers": [
          { "saturation": 27 },
          { "lightness": -11 },
          { "gamma": 1 },
          { "color": "#ffffff" }
        ]
      }
    ];
      var map, pointarray, heatmap;
      //Coordenadas de terrmotos
      var taxiData = [
        {location: new google.maps.LatLng(-33.44616,-70.659792), weight: Math.pow(2,4)},
        {location: new google.maps.LatLng(-33.44616,-71.759792), weight: Math.pow(2,3)}
        ];
      function initialize() {
        var mapOptions = {
          zoom: 5,
          center: new google.maps.LatLng(-33.44616,-70.659792),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          heading: 90,
          tilt: 45,
          panControl: false,
          zoomControl: false,
          mapTypeControl: false,
          scaleControl: false,
          streetViewControl: false,
          overviewMapControl: false
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        //Colores mapa
        map.setOptions({styles: styles});

        //Coordenadas de terremotos
        pointArray = new google.maps.MVCArray(taxiData);
        heatmap = new google.maps.visualization.HeatmapLayer({
          data: pointArray
        });
        heatmap.setMap(map);
        changeRadius();
        changeGradient();
        
        // layer = new google.maps.FusionTablesLayer({
        //   query: {
        //     select: 'geometry',
        //     from: 'Chile'
        //   },
        //   styles: [{
        //     polygonOptions: {
        //       fillColor: '#00FF00',
        //       fillOpacity: 0.3
        //     }
        //   },]
        // });
        // layer.setMap(map);
      }

      function toggleHeatmap() {
        heatmap.setMap(heatmap.getMap() ? null : map);
      }
      function changeGradient() {
        var gradient = [
        'rgba(255, 0, 0, 0)',
        'rgba(255, 255, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 0, 0, 1)',
        'rgba(255, 255, 0, 1)',
        'rgba(255, 255, 0, 1)'



          // 'rgba(0, 255, 255, 0)',
          // 'rgba(0, 255, 255, 1)',
          // 'rgba(0, 191, 255, 1)',
          // 'rgba(0, 127, 255, 1)',
          // 'rgba(0, 63, 255, 1)',
          // 'rgba(0, 0, 255, 1)',
          // 'rgba(0, 0, 223, 1)',
          // 'rgba(0, 0, 191, 1)',
          // 'rgba(0, 0, 159, 1)',
          // 'rgba(0, 0, 127, 1)',
          // 'rgba(63, 0, 91, 1)',
          // 'rgba(127, 0, 63, 1)',
          // 'rgba(191, 0, 31, 1)',
          // 'rgba(255, 0, 0, 1)'
        ]
        heatmap.setOptions({
          gradient: heatmap.get('gradient') ? null : gradient
        });
      }

      function changeRadius() {
        heatmap.setOptions({radius: heatmap.get('radius') ? null : 40});
      }

      function changeOpacity() {
        heatmap.setOptions({opacity: heatmap.get('opacity') ? null : 0.2});
      }

      function rotate90() {
        var heading = map.getHeading() || 0;
        map.setHeading(heading + 90);
      }

      function autoRotate() {
        // Determine if we're showing aerial imagery
        if (map.getTilt() != 0) {
          window.setInterval(rotate90, 3000);
        }
      }

    </script>
  </head>
  <body onload="initialize()">
    <!--input type="button" value="Auto Rotate" onclick="autoRotate();"-->
    <div id="map_canvas"></div>
    <button onclick="toggleHeatmap()">Toggle Heatmap</button>
    <button onclick="changeGradient()">Change gradient</button>
    <button onclick="changeRadius()">Change radius</button>
    <button onclick="changeOpacity()">Change opacity</button>
  </body>





</html>
